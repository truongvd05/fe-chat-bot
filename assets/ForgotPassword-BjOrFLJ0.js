import{l as h,r as l,j as e,I as p,B as g,N as j,c as N,d as b}from"./index-aeCwJNX1.js";import{C as w,a as k,b as C,c as E}from"./card-DPWbnyXO.js";import{u as S,o as y}from"./yup-COISer_V.js";const F=N({email:b().email("email không hợp lệ").required("Email là bắt buộc")});function P(){const[o,{isLoading:c}]=h(),{register:i,handleSubmit:m,setError:n,watch:u,formState:{errors:s}}=S({resolver:y(F)}),[d,a]=l.useState(!1),x=u("email"),f=async t=>{if(t)try{await o({email:t.email}).unwrap(),a(!0)}catch(r){console.log(r),a(!1),n("root",{type:"manual",message:r?.data.error})}};return l.useEffect(()=>{a(!1)},[x]),e.jsxs(w,{className:"w-full max-w-sm m-auto",children:[e.jsx(k,{children:e.jsx(C,{className:"m-auto",children:"Forgot password"})}),e.jsxs("form",{className:"flex flex-col items-center gap-2",onSubmit:m(f),children:[e.jsx("div",{className:"flex flex-col w-[80%] m-auto gap-2",children:e.jsx(p,{autoComplete:"email",type:"text",placeholder:"Email",...i("email",{required:!0})})}),s.email&&e.jsx("span",{className:"text-red-500 text-sm",children:s.email.message}),d&&e.jsx("span",{className:"text-sm text-green-500",children:"Liên kết đặt lại mật khẩu đã được gửi tới email của bạn"}),s.root&&e.jsx("span",{className:"text-red-500 text-sm",children:s.root.message||"lỗi"}),e.jsx(g,{disabled:c,className:"block",type:"submit",children:"Đồng ý"})]}),e.jsx(E,{className:" flex flex-col",children:e.jsx(j,{className:"",to:"/login",children:"Đã có tài khoản"})})]})}export{P as default};
