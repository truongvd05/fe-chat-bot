import{h,r as l,j as e,I as p,B as g,N as j}from"./index-BOEnyYZH.js";import{C as N,a as b,b as w,c as k}from"./card-D2pzYhHZ.js";import{u as C,o as E,c as S,a as y}from"./yup-CWzZv9Ll.js";const F=S({email:y().email("email không hợp lệ").required("Email là bắt buộc")});function P(){const[o,{isLoading:c}]=h(),{register:i,handleSubmit:m,setError:n,watch:u,formState:{errors:s}}=C({resolver:E(F)}),[d,a]=l.useState(!1),x=u("email"),f=async t=>{if(t)try{await o({email:t.email}).unwrap(),a(!0)}catch(r){console.log(r),a(!1),n("root",{type:"manual",message:r?.data.error})}};return l.useEffect(()=>{a(!1)},[x]),e.jsxs(N,{className:"w-full max-w-sm m-auto",children:[e.jsx(b,{children:e.jsx(w,{className:"m-auto",children:"Forgot password"})}),e.jsxs("form",{className:"flex flex-col items-center gap-2",onSubmit:m(f),children:[e.jsx("div",{className:"flex flex-col w-[80%] m-auto gap-2",children:e.jsx(p,{autoComplete:"email",type:"text",placeholder:"Email",...i("email",{required:!0})})}),s.email&&e.jsx("span",{className:"text-red-500 text-sm",children:s.email.message}),d&&e.jsx("span",{className:"text-sm text-green-500",children:"Liên kết đặt lại mật khẩu đã được gửi tới email của bạn"}),s.root&&e.jsx("span",{className:"text-red-500 text-sm",children:s.root.message||"lỗi"}),e.jsx(g,{disabled:c,className:"block",type:"submit",children:"Đồng ý"})]}),e.jsx(k,{className:" flex flex-col",children:e.jsx(j,{className:"",to:"/login",children:"Đã có tài khoản"})})]})}export{P as default};
